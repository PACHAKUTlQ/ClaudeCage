# ClaudeCage

<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgPHRpdGxlPkNsYXVkZUNhZ2UgSWNvbjwvdGl0bGU+CgogIDxzdHlsZT4KICAgIC8qIEFuaW1hdGlvbiBmb3IgdGhlIGV5ZXMgdG8gYmxpbmsgKi8KICAgIEBrZXlmcmFtZXMgYmxpbmsgewogICAgICAwJSwgOTAlLCAxMDAlIHsgdHJhbnNmb3JtOiBzY2FsZVkoMSk7IH0KICAgICAgOTUlIHsgdHJhbnNmb3JtOiBzY2FsZVkoMC4xKTsgfQogICAgfQoKICAgIC8qIEFuaW1hdGlvbiBmb3IgdGhlIHB1cGlscyB0byBsb29rIGFyb3VuZCAqLwogICAgQGtleWZyYW1lcyBsb29rLWFyb3VuZCB7CiAgICAgIDAlLCA0MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7IH0KICAgICAgNTAlLCA3MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEuNXB4KTsgfQogICAgICA4MCUsIDk1JSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxLjVweCk7IH0KICAgICAgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgfQogICAgfQoKICAgICNleWVzIHsKICAgICAgLyogQXBwbHkgYmxpbmsgYW5pbWF0aW9uIHRvIHRoZSB3aG9sZSBleWUgZ3JvdXAgKi8KICAgICAgYW5pbWF0aW9uOiBibGluayA0cyBpbmZpbml0ZTsKICAgICAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyOwogICAgfQoKICAgIC5wdXBpbC1ncm91cCB7CiAgICAgIC8qIEFwcGx5IGxvb2stYXJvdW5kIGFuaW1hdGlvbiB0byB0aGUgcHVwaWwgZ3JvdXAgKi8KICAgICAgYW5pbWF0aW9uOiBsb29rLWFyb3VuZCA1cyBpbmZpbml0ZSBlYXNlLWluLW91dDsKICAgIH0KICA8L3N0eWxlPgoKICA8IS0tIEdyb3VwIGZvciB0aGUgbWFpbiBjb250ZW50IChDbGF1ZGUgbG9nbyArIGV5ZXMpIC0tPgogIDxnIGlkPSJjb250ZW50Ij4KCiAgICA8IS0tIFRoZSBvcmlnaW5hbCBDbGF1ZGUgbG9nbyBwYXRoLCBzY2FsZWQgYW5kIGNlbnRlcmVkIC0tPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsIDMwKSBzY2FsZSgxLjMpIj4KICAgICAgPHBhdGggc2hhcGUtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGw9IiNEOTc3NTciIGQ9Im03Ljc1IDI2LjI3IDcuNzctNC4zNi4xMy0uMzgtLjEzLS4yMWgtLjM4bC0xLjMtLjA4LTQuNDQtLjEyLTMuODUtLjE2LTMuNzMtLjItLjk0LS4yTDAgMTkuNGwuMDktLjU4Ljc5LS41MyAxLjEzLjEgMi41LjE3IDMuNzUuMjYgMi43Mi4xNiA0LjAzLjQyaC42NGwuMDktLjI2LS4yMi0uMTYtLjE3LS4xNi0zLjg4LTIuNjMtNC4yLTIuNzgtMi4yLTEuNkwzLjg4IDExbC0uNi0uNzYtLjI2LTEuNjZMNC4xIDcuMzlsMS40NS4xLjM3LjEgMS40NyAxLjEzIDMuMTQgMi40MyA0LjEgMy4wMi42LjUuMjQtLjE3LjAzLS4xMi0uMjctLjQ1TDEzIDkuOWwtMi4zOC00LjEtMS4wNi0xLjctLjI4LTEuMDJjLS4xLS40Mi0uMTctLjc3LS4xNy0xLjJMMTAuMzQuMjFsLjY4LS4yMiAxLjY0LjIyLjY5LjYgMS4wMiAyLjMzIDEuNjUgMy42NyAyLjU2IDQuOTkuNzUgMS40OC40IDEuMzcuMTUuNDJoLjI2di0uMjRsLjIxLTIuODEuMzktMy40NS4zOC00LjQ0LjEzLTEuMjUuNjItMS41TDIzLjEuNTdsLjk2LjQ2Ljc5IDEuMTMtLjExLjczLS40NyAzLjA1LS45MiA0Ljc4LS42IDMuMmguMzVsLjQtLjQgMS42Mi0yLjE1IDIuNzItMy40IDEuMi0xLjM1IDEuNC0xLjQ5LjktLjcxaDEuN2wxLjI1IDEuODYtLjU2IDEuOTItMS43NSAyLjIyLTEuNDUgMS44OC0yLjA4IDIuOC0xLjMgMi4yNC4xMi4xOC4zMS0uMDMgNC43LTEgMi41NC0uNDYgMy4wMy0uNTIgMS4zNy42NC4xNS42NS0uNTQgMS4zMy0zLjI0LjgtMy44Ljc2LTUuNjYgMS4zNC0uMDcuMDUuMDguMSAyLjU1LjI0IDEuMDkuMDZoMi42N2w0Ljk3LjM3IDEuMy44Ni43OCAxLjA1LS4xMy44LTIgMS4wMi0yLjctLjY0LTYuMy0xLjUtMi4xNi0uNTRoLS4zdi4xOGwxLjggMS43NiAzLjMgMi45OCA0LjEzIDMuODQuMjEuOTUtLjUzLjc1LS41Ni0uMDgtMy42My0yLjczLTEuNC0xLjIzLTMuMTctMi42N2gtLjIxdi4yOGwuNzMgMS4wNyAzLjg2IDUuOC4yIDEuNzgtLjI4LjU4LTEgLjM1LTEuMS0uMkwyNiAzMy4xNGwtMi4zMy0zLjU3LTEuODgtMy4yLS4yMy4xMy0xLjExIDExLjk1LS41Mi42MS0xLjIuNDYtMS0uNzYtLjUzLTEuMjMuNTMtMi40My42NC0zLjE3LjUyLTIuNTIuNDctMy4xMy4yOC0xLjA0LS4wMi0uMDctLjIzLjAzLTIuMzYgMy4yNC0zLjU5IDQuODUtMi44NCAzLjA0LS42OC4yNy0xLjE4LS42MS4xMS0xLjA5LjY2LS45NyAzLjkzLTUgMi4zNy0zLjEgMS41My0xLjc5LS4wMS0uMjZoLS4wOUw2LjggMzAuNTZsLTEuODYuMjQtLjgtLjc1LjEtMS4yMy4zOC0uNCAzLjE0LTIuMTZaIj48L3BhdGg+CiAgICA8L2c+CgogICAgPCEtLSBBbmltYXRlZCBleWVzLCBwbGFjZWQgb3ZlciB0aGUgJ2hlYWQnIG9mIHRoZSBsb2dvIC0tPgogICAgPGcgaWQ9ImV5ZXMiPgogICAgICA8IS0tIExlZnQgRXllIC0tPgogICAgICA8Y2lyY2xlIGN4PSIyOCIgY3k9IjQ2IiByPSI1LjUiIGZpbGw9IndoaXRlIiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMC41Ii8+CiAgICAgIDwhLS0gUmlnaHQgRXllIC0tPgogICAgICA8Y2lyY2xlIGN4PSI0MiIgY3k9IjQ2IiByPSI1LjUiIGZpbGw9IndoaXRlIiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMC41Ii8+CgogICAgICA8ZyBjbGFzcz0icHVwaWwtZ3JvdXAiPgogICAgICAgIDwhLS0gTGVmdCBQdXBpbCAtLT4KICAgICAgICA8Y2lyY2xlIGN4PSIyOCIgY3k9IjQ3IiByPSIyLjUiIGZpbGw9IiMyMjIiLz4KICAgICAgICA8IS0tIFJpZ2h0IFB1cGlsIC0tPgogICAgICAgIDxjaXJjbGUgY3g9IjQyIiBjeT0iNDciIHI9IjIuNSIgZmlsbD0iIzIyMiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgoKICA8IS0tIFRoZSBDYWdlLCBkcmF3biBvbiB0b3Agb2YgdGhlIGNvbnRlbnQgLS0+CiAgPGcgaWQ9ImNhZ2UiIGZpbGw9IiM0QTRBNEEiIHN0cm9rZT0iIzRBNEE0QSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj4KICAgIDwhLS0gT3V0ZXIgZnJhbWUgLS0+CiAgICA8cmVjdCB4PSI1IiB5PSI1IiB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHJ4PSI4IiByeT0iOCIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSI0Ii8+CgogICAgPCEtLSBWZXJ0aWNhbCBCYXJzIC0tPgogICAgPHJlY3QgeD0iMjUiIHk9IjUiIHdpZHRoPSI0IiBoZWlnaHQ9IjkwIi8+CiAgICA8cmVjdCB4PSI0OCIgeT0iNSIgd2lkdGg9IjQiIGhlaWdodD0iOTAiLz4KICAgIDxyZWN0IHg9IjcxIiB5PSI1IiB3aWR0aD0iNCIgaGVpZ2h0PSI5MCIvPgoKICAgIDwhLS0gSG9yaXpvbnRhbCBCYXIgLS0+CiAgICA8cmVjdCB4PSI1IiB5PSIyOCIgd2lkdGg9IjkwIiBoZWlnaHQ9IjQiLz4KICA8L2c+Cjwvc3ZnPg==">

**Run the SOTA AI coding agent in a portable, secure sandbox.**

[Claude Code](https://github.com/anthropics/claude-code) is a state-of-the-art AI coding assistant. Unfortunately, its CLI is distributed as closed-source and obfuscated javascript. You don't know what it's doing. Is it reading your SSH keys? Is it indexing your photos? Is it planning some Skynet world domination from your `~/Downloads` folder?

Probably not... **but why risk it?**

**ClaudeCage** solves this by packaging the `claude-code` CLI into a fully isolated, single-file container. It cannot access any part of your system except for the single project directory you are currently working in.

## Features

- **Secure Sandbox**: Powered by Linux namespaces, the `claude` process is heavily restricted and cannot access your home directory, network information, or other processes.
- **Single-File Portability**: The entire environment—the `claude` binary, the `bun` runtime, and all dependencies—is packed into a single executable file. Download it, make it executable, and run it.
- **No Host Dependencies**: You do not need `node`, `bun`, or anything else installed on your system.
- **Works on Most Linux Distros**: Runs on virtually any modern Linux distribution.
- **Better Performance**: Runs at native speed. It runs even faster than official Claude Code thanks to the modern high performance javascript runtime: [**bun**](https://github.com/oven-sh/bun).
- **Custom API Support**: Easily configure it to use custom API endpoints, including OpenAI proxies.

## How It Works

ClaudeCage is built using the [**RunImage**](https://github.com/VHSgunzo/runimage) project, which leverages [**Bubblewrap**](https://github.com/containers/bubblewrap) to create lightweight, unprivileged containers. This project provides a simple build script to automate the creation of a custom RunImage container specifically for `claude-code`.

## Usage

### 1. Get ClaudeCage

#### Download pre-built binary

Download `ClaudeCage` binary and `ClaudeCage.rcfg` config file, copy both files to a location in your `$PATH`, like `~/.local/bin/`.

#### Build from Source

First, clone the repository. The build script has no dependencies other than `curl` and standard coreutils.

```bash
git clone https://github.com/your-username/ClaudeCage.git
cd ClaudeCage
./build.sh
```

The script will download the necessary components and create two files in the current directory:

- `ClaudeCage`: The portable executable.
- `ClaudeCage.rcfg`: The sandbox configuration file.

### 2. Run ClaudeCage

Move both the `ClaudeCage` executable and the `.rcfg` file to a location in your `$PATH`, like `~/.local/bin/`.

```bash
mv ClaudeCage ClaudeCage.rcfg ~/.local/bin/
```

Now, you can use it just like the regular `claude` command. Navigate to any project directory and run it. It will only have access to that directory.

```bash
cd /path/to/my/awesome-project
ClaudeCage "Refactor this function to be more efficient." # Claude Code now has access to this directory only
```

## Configuration

### Custom API Endpoints & Proxies

You can make `claude-code` use a custom API endpoint (including OpenAI proxies like [claude-code-proxy](https://github.com/fuergaosi233/claude-code-proxy)) by setting environment variables _before_ running ClaudeCage. claude-code-proxy is _NOT_ integrated into this project.

```bash
# Example for using claude-code-proxy that translate API calls to OpenAI API format.
export ANTHROPIC_BASE_URL="http://localhost:8082/"
export ANTHROPIC_AUTH_TOKEN="not-needed-when-using-local-proxy"
export ANTHROPIC_MODEL="anthropic/claude-sonnet-4"
export ANTHROPIC_SMALL_FAST_MODEL="google/gemini-2.0-flash"

ClaudeCage "What is the capital of Nebraska?"
```

See the official [claude-code settings documentation](https://docs.anthropic.com/en/docs/claude-code/settings#environment-variables) for more details.

## Acknowledgements

This project would be impossible without the fantastic work of the following open-source tools:

- [**RunImage**](https://github.com/VHSgunzo/runimage) for making single-file, portable Linux containers a reality.
- [**Bubblewrap**](https://github.com/containers/bubblewrap) for providing the low-level sandboxing technology.
- [**Bun**](https://github.com/oven-sh/bun) as modern, high performance, node.js-compatible javascript runtime.
- [**claude-code-proxy**](https://github.com/fuergaosi233/claude-code-proxy) for recommended OpenAI format API proxy.
